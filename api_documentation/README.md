# API Documentation

## Path:
```
https://app.pps.land/public-api/v1/<endpoint>
```
## Note:
All requests must be POST requests.
Any other request type will be rejected with error code [405](https://httpstatuses.com/405)

## Request Signing
All API calls must be signed by an API key to be validated.
PHP signing key example:
```PHP
$algo = "sha256";
$data = "data";
$key = "key";
$signature = hash_hmac($algo, $data, $key);
```

## Request Payload
The request payload is of `content-type: form-data`.

### Required Parameters:

`json`: string representation of json data to send to PPS.

The string representation of this `json` parameter is what goes into the `data` variable above to generate the signature.
The `json` parameter should also include a key `userToken` of the value which is set by the Speak PPS Plugin and should be sent with every request.

`orgname`: name of the org.

 This is used as a client identifier by PPS. You can get this org from the PPS Developement Staff.

 `signature`: Signature generated by the API key.

 Here is a cURL example:
 ```
 curl -X POST \
  https://app.pps.land/public-api/v1/public-user-login \
  -H 'Cache-Control: no-cache' \
  -H 'Content-Type: application/json' \
  -H 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW' \
  -F 'json={"userEmail": "testuser","userPassword": "testpassword",  "userToken": "testtoken"}' \
  -F orgname=TestOrg \
  -F signature=4feec9a388bef3fd436be
 ```
You can use [Postman](https://www.getpostman.com/)
or [Insomnia](https://insomnia.rest/) to test requests and get responses from PPS.

 ## Endpoints

### public-user-login
`development status: complete`

Logs in a user.

Required json key value pairs:
```
userEmail
userPassword
userToken
```
Returns on success:
```
message: "Login Success"
data: userEmail
```

### public-user-logout
`development status: complete`

Logs out a user.

Required json key value pairs:
```
userToken
```
Returns on success:
```
message: "Logout Success"
data: None
```

### create-public-user
`development status: complete`

Creates a new user in PPS.

Required json key value pairs:
```
userToken
userEmail
userPassword
first_name
last_name
number
unit
street
state
zip
```

Returns on success:
```
message: "User created and logged in"
```
